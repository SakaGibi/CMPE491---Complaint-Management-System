<div class="management-panel-container">
  <!-- Header -->
  <div class="header-panel">
    <div class="logo">
      <span>Logo</span>
    </div>
    <div>
      <button class="btn btn-header" (click)="goToMainMenu()">Main Menu</button>
      <button class="btn btn-header" (click)="goToSupport()">Help & Support</button>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="content-area">
    <!-- Left Section: Chart and Graph -->
    <div class="left-section">
      <div class="chart-container">
        <h2>Complaint Chart</h2>
        <div class="chart">[Chart Placeholder]</div>
      </div>
      <div class="graph-container">
        <h2>Complaint Trends</h2>
        <div class="graph">[Graph Placeholder]</div>
      </div>
    </div>

    <!-- Center Section: Complaints List -->
    <div class="center-section">
      <div class="complaints-header">
        <div class="complaints-title">
          <h2>All Complaints</h2>
        </div>
        <div class="filters">
          <div class="filter-row">
            <label>Status:</label>
            <select [(ngModel)]="selectedStatus" (change)="fetchComplaints()">
              <option value="">All</option>
              <option value="new">New</option>
              <option value="in_progress">In Progress</option>
              <option value="resolved">Resolved</option>
              <option value="reopened">Reopened</option>
              <option value="closed">Closed</option>
            </select>
        
            <label>Category:</label>
            <select [(ngModel)]="selectedCategory" (change)="fetchComplaints()">
              <option value="">All</option>
              <option value="date">DİĞER KATEGORİLERE GÖRE EKLENİCEK</option>
            </select>
          </div>
        
          <div class="filter-row">
            <label>Trackable:</label>
            <select [(ngModel)]="selectedTrackable" (change)="fetchComplaints()">
              <option value="">All</option>
              <option value="true">Trackable</option>
              <option value="false">Not Trackable</option>
            </select>
        
            <label>Sort:</label>
            <select [(ngModel)]="selectedSortOption" (change)="fetchComplaints()">
              <option value="">Sort by</option>
              <option value="newest">Newest → Oldest</option>
              <option value="oldest">Oldest → Newest</option>
            </select>
          </div>
        </div>
      </div>
      <div class="complaints-list">
        <ul *ngIf="complaintList.length > 0; else noComplaints">
          <li *ngFor="let complaint of complaintList" (click)="openComplaintModal(complaint.id)">
            {{ complaint.description }}
          </li>
        </ul>
        <ng-template #noComplaints>
          <p>No complaints found.</p>
        </ng-template>
      </div>
    </div>

    <!-- Right Section: Suggestions -->
    <div class="right-section">
      <h2>Suggestions</h2>
      <div class="suggestions-list">
        <ul *ngIf="suggestionList.length > 0; else noSuggestions">
          <li *ngFor="let suggestion of suggestionList" (click)="openSuggestionModal(suggestion)">
            {{ suggestion.description }}
          </li>
        </ul>
        <ng-template #noSuggestions>
          <p>No suggestions found.</p>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- Modal: Suggestion Details -->
  <div class="fullscreen-modal" *ngIf="isSuggestionModalOpen">
    <div class="modal-content">
      <button class="close-btn" (click)="closeSuggestionModal()">X</button>
      <div class="modal-detail">
        <h2>Suggestion Details</h2>
        <p><strong>ID:</strong> {{ selectedSuggestion?.id }}</p>
        <p><strong>Description:</strong> {{ selectedSuggestion?.description }}</p>
        <p><strong>Category:</strong> {{ selectedSuggestion?.category || 'N/A' }}</p>
        <p><strong>Email:</strong> {{ selectedSuggestion?.email || 'N/A' }}</p>
        <p><strong>Status:</strong> {{ selectedSuggestion?.status }}</p>
        <p><strong>Created:</strong> {{ selectedSuggestion?.created_at | date:'short' }}</p>
        <p><strong>Updated:</strong> {{ selectedSuggestion?.updated_at | date:'short' }}</p>
        <hr>
        <button class="btn btn-danger" (click)="deleteSuggestion()">Delete Suggestion</button>
      </div>
    </div>
</div>

  <!-- Placeholder Modal for Chart/Graph -->
  <div class="fullscreen-modal" style="display: none">
    <div class="modal-content">
      <button class="close-btn">X</button>
      <div class="modal-detail">
        <h2>Modal Content</h2>
      </div>
    </div>
  </div>

<!-- Modal: Complaint Details -->
<div class="fullscreen-modal" *ngIf="isComplaintModalOpen">
  <div class="modal-content">
    <button class="close-btn" (click)="closeComplaintModal()">X</button>
    <div class="modal-detail">
      <h2>Complaint Details</h2>
      <p><strong>ID:</strong> {{ selectedComplaint?.id }}</p>
      <p><strong>Status:</strong> {{ selectedComplaint?.status }}</p>
      <p><strong>Description:</strong> {{ selectedComplaint?.description }}</p>
      <p><strong>Category:</strong> {{ selectedComplaint?.category }}</p>
      <p><strong>Sub-Category:</strong> {{ selectedComplaint?.sub_category }}</p>
      <p><strong>Email:</strong> {{ selectedComplaint?.email || 'N/A' }}</p>
      <p><strong>Created:</strong> {{ selectedComplaint?.created_at | date:'short' }}</p>
      <p><strong>Updated:</strong> {{ selectedComplaint?.updated_at | date:'short' }}</p>

      <hr>

      <label for="status">Update Status:</label>
      <select id="status" [(ngModel)]="selectedComplaintStatus">
        <option value="new">New</option>
        <option value="in_progress">In Progress</option>
        <option value="resolved">Resolved</option>
        <option value="reopened">Reopened</option>
        <option value="closed">Closed</option>
      </select>
      <button (click)="updateComplaintStatus()">Update Status</button>
      <hr>

      <button class="btn btn-danger" (click)="deleteComplaint()">Delete Complaint</button>
    </div>
  </div>
</div>

</div>
